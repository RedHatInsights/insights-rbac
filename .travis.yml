language: python

python:
  - "3.8"

cache: pip

services:
  - postgresql
  - redis-server

addons:
  postgresql: '13'
  apt:
    packages:
      - postgresql-13
      - postgresql-client-13

env:
  PGPORT=5433
  PGUSER=travis
  DATABASE_NAME=rbac_test
  DATABASE_HOST=localhost
  DATABASE_PORT=5433
  DATABASE_USER=travis
  DATABASE_PASSWORD=''



install:
  - pip install tox codecov

before_script:
  - psql -V
  - psql -c "create database ${DATABASE_NAME};" -U travis -p 5433

script:
  - tox

after_success:
  - codecov
